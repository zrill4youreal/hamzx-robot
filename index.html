<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hamzx AI — Chat</title>
  <style>
    :root{
      --bg:#081126;--card:#12202a;--muted:#9aa6b2;
      --accent-start:#3ad59f;--accent-end:#2bb0ff;
      --bubble-user:#d1f7e6;--bubble-ai:#0d1b23;
      --radius:16px;--glass: rgba(255,255,255,0.03);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;min-height:100vh;background:linear-gradient(180deg,#02121a 0%, #052028 60%);color:#e6eef6;display:flex;align-items:center;justify-content:center;padding:24px}
    .wrap{width:100%;max-width:760px}
    header{display:flex;align-items:center;gap:12px;margin-bottom:18px}
    .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent-start),var(--accent-end));display:flex;align-items:center;justify-content:center;font-weight:700;color:#022;box-shadow:0 6px 18px rgba(11,22,32,0.6)}
    h1{font-size:20px;margin:0}
    p.lead{color:var(--muted);margin:4px 0 0;font-size:13px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:18px;padding:18px;border:1px solid rgba(255,255,255,0.04);box-shadow:0 8px 30px rgba(2,8,12,0.6)}
    .chat-area{height:520px;display:flex;flex-direction:column;gap:12px;padding:14px;background:linear-gradient(180deg, rgba(10,20,30,0.5), rgba(6,12,18,0.4));border-radius:12px;overflow:auto;border:1px solid rgba(255,255,255,0.02)}
    .msg{max-width:78%;padding:12px 14px;border-radius:12px;background:var(--bubble-ai);color:#e6f7ff;border:1px solid rgba(255,255,255,0.02);box-shadow:0 6px 16px rgba(3,8,12,0.5)}
    .msg.ai{align-self:flex-start;border-top-left-radius:6px}
    .msg.user{align-self:flex-end;background:linear-gradient(180deg,var(--bubble-user),#c7f1e0);color:#042127;border-top-right-radius:6px}
    .meta{display:flex;gap:8px;align-items:center;margin-bottom:8px}
    .avatar{width:36px;height:36px;border-radius:10px;background:#0a2630;border:1px solid rgba(255,255,255,0.04);display:flex;align-items:center;justify-content:center}
    .ai-name{font-weight:600}
    .input-row{display:flex;gap:12px;margin-top:12px}
    .input-row input[type=text]{flex:1;padding:14px 16px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);background:rgba(255,255,255,0.02);color:inherit;font-size:15px}
    .btn{padding:12px 18px;border-radius:12px;border:none;background:linear-gradient(180deg,var(--accent-start),var(--accent-end));color:#022;font-weight:700;cursor:pointer}
    .hint{color:var(--muted);font-size:13px;margin-top:8px}
    @media (max-width:520px){.chat-area{height:68vh}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">H</div>
      <div>
        <h1>Hamzx AI</h1>
        <p class="lead">Tanya apa saja — jawaban santai & to the point 😎</p>
      </div>
    </header>

    <div class="card">
      <div class="chat-area" id="chat"></div>
      <div class="input-row">
        <input id="prompt" type="text" placeholder="Tulis pertanyaan lo..." autocomplete="off" />
        <button id="send" class="btn">Kirim</button>
      </div>
      <div class="hint">Pesan diproses lewat backend <code>/api/chat</code>.</div>
    </div>
  </div>

  <script>
    const chatEl = document.getElementById('chat');
    const promptEl = document.getElementById('prompt');
    const sendBtn = document.getElementById('send');

    function appendMessage({who='ai', text}){
      const box = document.createElement('div');
      const meta = document.createElement('div'); meta.className = 'meta';
      const avatar = document.createElement('div'); avatar.className='avatar';
      avatar.textContent = who === 'ai' ? '🤖' : '👤';
      const name = document.createElement('div'); name.className='ai-name';
      name.textContent = who === 'ai' ? 'Hamzx AI' : 'Kamu';
      meta.append(avatar, name);

      const msg = document.createElement('div');
      msg.className = 'msg ' + (who === 'ai' ? 'ai' : 'user');
      msg.innerHTML = text.replace(/\n/g,'<br>');
      box.appendChild(meta); box.appendChild(msg);
      chatEl.appendChild(box);
      chatEl.scrollTop = chatEl.scrollHeight + 200;
    }

    appendMessage({who:'ai', text:'Halo! Gue Hamzx AI 👋\nAda yang bisa dibantu?'});

    async function fetchChat(userText){
      const resp = await fetch('/api/chat', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ prompt: userText })
      });
      const data = await resp.json();
      return data.reply;
    }

    async function handleSend(){
      const text = promptEl.value.trim();
      if(!text) return;
      appendMessage({who:'user', text});
      promptEl.value = '';
      sendBtn.disabled = true; sendBtn.textContent = '...';
      try{
        const reply = await fetchChat(text);
        appendMessage({who:'ai', text: reply});
      }catch(err){
        appendMessage({who:'ai', text: '⚠️ Error: ' + err.message});
      }finally{
        sendBtn.disabled = false; sendBtn.textContent = 'Kirim';
      }
    }

    sendBtn.addEventListener('click', handleSend);
    promptEl.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') handleSend(); });
  </script>
</body>
</html>